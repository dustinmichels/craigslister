<html lang="en">
  <head>
    <base target="_top" />
  </head>
  <body>
    Testing!
    <button onclick="run()">Press me</button>
    <p id="output"></p>

    <textarea id="inHtml" name="w3review" disabled rows="4" cols="50">
        <?= inHtml ?>
    </textarea>

    <script>
      function run() {
        const output = document.getElementById("output");
        const textArea = document.getElementById("inHtml");

        output.innerText = "starting!";

        const inHtml = textArea.value;

        // output.innerText = inHtml;

        const parser = new DOMParser();
        const doc = parser.parseFromString(inHtml, "text/html");
        const text = new XMLSerializer().serializeToString(doc);

        output.innerText = "done!";
        textArea.value = text;

        // output.innerText = "starting!";

        // const url =
        //   "https://denver.craigslist.org/search/sss?sort=rel&query=freezer";
        // let url = "https://example.com/";

        // fetch(url, { mode: "cors" })
        //   .then(function (response) {
        //     return response.text();
        //   })
        //   .then(function (html) {
        //     output.innerText = html;

        //     // Initialize the DOM parser
        //     const parser = new DOMParser();

        //     // Parse the text
        //     const doc = parser.parseFromString(html, "text/html");

        //     const text = new XMLSerializer().serializeToString(doc);
        //     console.log("from xml!");
        //     console.log(text);

        //     output.innerText = "done!";
        //   })
        //   .catch(function (err) {
        //     console.log("Failed to fetch page: ", err);
        //     output.innerText = `Failed to fetch page: ${err}`;
        //   });
      }
    </script>
  </body>
</html>
